<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="dashboard-box">
            <div class="header">
                <h1>–ü—Ä–∏–≤–µ—Ç, <span id="student-name"></span>! üëã</h1>
                <button onclick="logout()" class="logout-btn">–í—ã–π—Ç–∏</button>
            </div>
            
            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ -->
            <div id="welcome-message" class="welcome-message"></div>
            
            <!-- –ë–ª–æ–∫ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –î–ó -->
            <div id="homework-section" class="section" style="display: none;">
                <h2>üìö –î–æ–º–∞—à–Ω–∏–µ —Ä–∞–±–æ—Ç—ã</h2>
                <div id="homework-results" class="results-grid"></div>
            </div>
            
            <!-- –ë–ª–æ–∫ –¥–ª—è –ø—Ä–æ–±–Ω–∏–∫–æ–≤ -->
            <div id="exam-section" class="section" style="display: none;">
                <h2>üéØ –ü—Ä–æ–±–Ω–∏–∫–∏</h2>
                <div id="exam-results" class="results-grid"></div>
            </div>
            
            <!-- –û–±—â–∏–π —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª -->
            <div id="average" class="average-card"></div>
        </div>
    </div>

    <script>
        const icons = {
                exam: 'üéØ',
                homework: 'üìö',
                test: 'üìù',
                lab: 'üî¨'
            };
        function getColorForPercentage(percent) {
            if (percent >= 80) return '#2ecc71';
            if (percent >= 60) return '#f39c12';
            return '#e74c3c';
        }

        function getEmojiForType(type) {
            switch(type) {
                case 'exam': return 'üìù';
                case 'homework': return 'üìö';
                default: return 'üìä';
            }
        }

        function getTitleForType(type) {
            switch(type) {
                case 'exam': return '–ü—Ä–æ–±–Ω–∏–∫';
                case 'homework': return '–î–æ–º–∞—à–Ω—è—è —Ä–∞–±–æ—Ç–∞';
                default: return '–†–∞–±–æ—Ç–∞';
            }
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Ö–æ–¥
        const userName = sessionStorage.getItem('userName');
        const userResults = sessionStorage.getItem('userResults');
        const userType = sessionStorage.getItem('userType');
        
        if (!userName || !userResults) {
            window.location.href = 'index.html';
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è
        document.getElementById('student-name').textContent = userName;
        
        // –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
        const welcomeDiv = document.getElementById('welcome-message');
        if (userType === 'exam_only') {
            welcomeDiv.innerHTML = 'üëã –ì–æ—Ç–æ–≤—å—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º! –í–æ—Ç —Ç–≤–æ–∏ –ø—Ä–æ–±–Ω–∏–∫–∏:';
        } else if (userType === 'advanced') {
            welcomeDiv.innerHTML = 'üåü –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å! –ò –î–ó, –∏ –ø—Ä–æ–±–Ω–∏–∫–∏:';
        } else {
            welcomeDiv.innerHTML = 'üìñ –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å:';
        }
        
        // –ü–∞—Ä—Å–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        const results = JSON.parse(userResults);
        
        // –†–∞–∑–¥–µ–ª—è–µ–º –ø–æ —Ç–∏–ø–∞–º
        const homeworkResults = [];
        const examResults = [];
        
        for (let lesson in results) {
            const item = results[lesson];
            if (item.type === 'exam') {
                examResults.push({ name: lesson, ...item });
            } else {
                homeworkResults.push({ name: lesson, ...item });
            }
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –µ—Å—Ç—å
        if (homeworkResults.length > 0) {
            document.getElementById('homework-section').style.display = 'block';
            const homeworkDiv = document.getElementById('homework-results');
            let homeworkHtml = '';
            
            homeworkResults.forEach(item => {
                const color = getColorForPercentage(item.value);
                homeworkHtml += `
                    <div class="result-card" style="border-left-color: ${color}">
                        <div class="lesson-name">${item.name}</div>
                        <div class="lesson-grade" style="color: ${color}">
                            <span class="percent-number">${item.value}%</span>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${item.value}%; background-color: ${color}"></div>
                            </div>
                        </div>
                    </div>
                `;
            });
            homeworkDiv.innerHTML = homeworkHtml;
        }
        
        if (examResults.length > 0) {
            document.getElementById('exam-section').style.display = 'block';
            const examDiv = document.getElementById('exam-results');
            let examHtml = '';
            
            examResults.forEach(item => {
                const color = getColorForPercentage(item.value);
                examHtml += `
                    <div class="result-card exam-card" style="border-left-color: ${color}">
                        <div class="lesson-name">${item.name}</div>
                        <div class="lesson-grade" style="color: ${color}">
                            <span class="percent-number">${item.value}%</span>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${item.value}%; background-color: ${color}"></div>
                            </div>
                        </div>
                    </div>
                `;
            });
            examDiv.innerHTML = examHtml;
        }
        
        // –°—á–∏—Ç–∞–µ–º –æ–±—â–∏–π —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª
        const allResults = [...homeworkResults, ...examResults];
        if (allResults.length > 0) {
            const total = allResults.reduce((sum, item) => sum + item.value, 0);
            const average = (total / allResults.length).toFixed(1);
            const avgColor = getColorForPercentage(average);
            
            document.getElementById('average').innerHTML = `
                <div class="average-content" style="border-bottom: 3px solid ${avgColor}">
                    <span class="average-label">–û–±—â–∏–π —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</span>
                    <span class="average-value" style="color: ${avgColor}">${average}%</span>
                </div>
            `;
        }
        
        function logout() {
            sessionStorage.clear();
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
