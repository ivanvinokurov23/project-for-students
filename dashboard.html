<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="dashboard-box">
            <div class="header">
                <h1>–ü—Ä–∏–≤–µ—Ç, <span id="student-name"></span>! üëã</h1>
                <button onclick="logout()" class="logout-btn">–í—ã–π—Ç–∏</button>
            </div>
            
            <h2>–¢–≤–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h2>
            
            <!-- –î–æ–±–∞–≤–ª—è–µ–º —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª -->
            <div id="average" class="average-card">
                <!-- –°—é–¥–∞ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—Å—è —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç -->
            </div>
            
            <div id="results" class="results">
                <!-- –°—é–¥–∞ –ø–æ–¥—Å—Ç–∞–≤—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            </div>
        </div>
    </div>

    <script>
        function getColorForPercentage(percent) {
            if (percent >= 80) return '#2ecc71'; // –∑–µ–ª–µ–Ω—ã–π
            if (percent >= 60) return '#f39c12'; // –æ—Ä–∞–Ω–∂–µ–≤—ã–π
            return '#e74c3c'; // –∫—Ä–∞—Å–Ω—ã–π
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ª–æ–≥–∏–Ω–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        const userName = sessionStorage.getItem('userName');
        const userResults = sessionStorage.getItem('userResults');
        
        if (!userName || !userResults) {
            window.location.href = 'index.html';
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è
        document.getElementById('student-name').textContent = userName;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        const results = JSON.parse(userResults);
        const resultsDiv = document.getElementById('results');
        const averageDiv = document.getElementById('average');
        
        if (Object.keys(results).length === 0) {
            resultsDiv.innerHTML = '<p class="no-results">–ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ üò¢</p>';
            averageDiv.style.display = 'none';
        } else {
            // –°—á–∏—Ç–∞–µ–º —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª
            let total = 0;
            let count = 0;
            let html = '<div class="results-grid">';
            
            for (let lesson in results) {
                const percent = results[lesson].value;
                total += percent;
                count++;
                
                const color = getColorForPercentage(percent);
                
                html += `
                    <div class="result-card" style="border-left-color: ${color}">
                        <div class="lesson-name">${lesson}</div>
                        <div class="lesson-grade" style="color: ${color}">
                            <span class="percent-number">${percent}%</span>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${percent}%; background-color: ${color}"></div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            html += '</div>';
            resultsDiv.innerHTML = html;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª
            const average = (total / count).toFixed(1);
            const avgColor = getColorForPercentage(average);
            
            averageDiv.innerHTML = `
                <div class="average-content" style="border-bottom: 3px solid ${avgColor}">
                    <span class="average-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</span>
                    <span class="average-value" style="color: ${avgColor}">${average}%</span>
                </div>
            `;
        }
        
        function logout() {
            sessionStorage.clear();
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>